# ููุฎุต ุชุทุจูู Weather API ุนูู ุตูุญุฉ `/map`

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ุฅูุดุงุก ูููู WeatherInfoWindow
- **ุงูููู**: `components/WeatherInfoWindow.tsx`
- **ุงููุธููุฉ**: ุนุฑุถ ูุนูููุงุช ุงูุทูุณ ูู InfoWindow ุนูู Google Maps
- **ุงููููุฒุงุช**:
  - ุนุฑุถ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุญุงูุฉ ุงูุฌููุฉ
  - ุนุฑุถ ุงูุฑุทูุจุฉุ ุงูุฑูุงุญุ ุงูุฑุคูุฉุ ุงูุถุบุท
  - ุนุฑุถ ูุนุฏู ุงูุฃูุทุงุฑ ูุงูุบููู
  - ุนุฑุถ ุชุญุฐูุฑุงุช ุงูุทูุณ ุจุฃููุงู ูุฎุชููุฉ

### 2. ุชุญุฏูุซ GoogleTrafficMap
- **ุงูููู**: `components/GoogleTrafficMap.tsx`
- **ุงูุชุญุฏูุซุงุช**:
  - ุฅุถุงูุฉ prop `showWeatherLayer`
  - ุฅุถุงูุฉ state ููู weather markers ู info window
  - ุฅุถุงูุฉ click listener ูุนุฑุถ ุจูุงูุงุช ุงูุทูุณ ุนูุฏ ุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ
  - ุฅุถุงูุฉ weather markers ุนูู ุงูุฎุฑูุทุฉ ุนูุฏ ุชูุนูู ุงูุทุจูุฉ
  - ุชูุธูู weather markers ุนูุฏ ุฅูุบุงุก ุงูุชูุนูู

### 3. ุชุญุฏูุซ ุตูุญุฉ `/map`
- **ุงูููู**: `app/map/page.tsx`
- **ุงูุชุญุฏูุซุงุช**:
  - ุฅุถุงูุฉ state `showWeatherLayer`
  - ุฅุถุงูุฉ checkbox ูุชูุนูู/ุฅูุบุงุก ุชูุนูู ุทุจูุฉ ุงูุทูุณ
  - ุชูุฑูุฑ `showWeatherLayer` ุฅูู `GoogleTrafficMap`

## ๐ฏ ุงููููุฒุงุช

### 1. ุนุฑุถ ุจูุงูุงุช ุงูุทูุณ ุนูุฏ ุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ
- ุนูุฏ ุชูุนูู ุทุจูุฉ ุงูุทูุณ ูุงูููุฑ ุนูู ุฃู ููุงู ูู ุงูุฎุฑูุทุฉ
- ูุชู ุฌูุจ ุจูุงูุงุช ุงูุทูุณ ูู API
- ุนุฑุถ InfoWindow ูุญุชูู ุนูู:
  - ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุญุงูุฉ ุงูุฌููุฉ
  - ุงูุฑุทูุจุฉุ ุงูุฑูุงุญุ ุงูุฑุคูุฉุ ุงูุถุบุท
  - ูุนุฏู ุงูุฃูุทุงุฑ ูุงูุบููู
  - ุชุญุฐูุฑุงุช ุงูุทูุณ (ุฅู ูุฌุฏุช)

### 2. Weather Markers ุนูู ุงูุฎุฑูุทุฉ
- ุนูุฏ ุชูุนูู ุทุจูุฉ ุงูุทูุณ
- ูุชู ุฌูุจ ุจูุงูุงุช ุงูุทูุณ ููู marker ููุฌูุฏ ุนูู ุงูุฎุฑูุทุฉ
- ุนุฑุถ weather markers ุจุฃููุงู ูุฎุชููุฉ ุญุณุจ ุญุงูุฉ ุงูุทูุณ:
  - ๐ข ุฃุฎุถุฑ: ุทูุณ ุฌูุฏ
  - ๐ก ุฃุตูุฑ: ุชุญุฐูุฑุงุช ูุชูุณุทุฉ
  - ๐ ุจุฑุชูุงูู: ุชุญุฐูุฑุงุช ุนุงููุฉ
  - ๐ด ุฃุญูุฑ: ุชุญุฐูุฑุงุช ุญุฑุฌุฉ

### 3. ุชูุนูู/ุฅูุบุงุก ุงูุชูุนูู
- checkbox ูู ุงูุดุฑูุท ุงูุฌุงูุจู
- ูููู ุชูุนูู ุฃู ุฅูุบุงุก ุชูุนูู ุทุจูุฉ ุงูุทูุณ ุจุณูููุฉ
- ุนูุฏ ุงูุฅูุบุงุกุ ูุชู ุชูุธูู ุฌููุน weather markers

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชูุนูู ุทุจูุฉ ุงูุทูุณ
1. ุงูุชุญ ุตูุญุฉ `/map`
2. ูู ุงูุดุฑูุท ุงูุฌุงูุจูุ ูุนูู checkbox "๐ค๏ธ ุนุฑุถ ุจูุงูุงุช ุงูุทูุณ"
3. ุณุชุธูุฑ weather markers ุนูู ุงูุฎุฑูุทุฉ

### 2. ุนุฑุถ ุจูุงูุงุช ุงูุทูุณ
- **ุนูุฏ ุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ**: ูุชู ุนุฑุถ InfoWindow ุจุจูุงูุงุช ุงูุทูุณ ูููููุน ุงููุญุฏุฏ
- **ุนูุฏ ุงูููุฑ ุนูู weather marker**: ูุชู ุนุฑุถ InfoWindow ุจุจูุงูุงุช ุงูุทูุณ ุงูุชูุตูููุฉ

### 3. ุฅูุบุงุก ุงูุชูุนูู
- ุฃูุบู ุชูุนูู checkbox ูุฅุฎูุงุก weather markers

## ๐ง API ุงููุณุชุฎุฏู

### Weather API Endpoint
```
GET /api/weather/point?lat={latitude}&lng={longitude}
```

### Response Format
```json
{
  "success": true,
  "data": {
    "current": {
      "temperature": 25,
      "condition": "clear",
      "humidity": 60,
      "windSpeed": 15,
      "visibility": 10000,
      "pressure": 1013,
      "precipitation": 0,
      "rainRate": 0,
      "cloudCover": 20
    },
    "alerts": [
      {
        "type": "heavy_rain",
        "level": "high",
        "message": "ุฃูุทุงุฑ ุบุฒูุฑุฉ: 15.0 ูู/ุณุงุนุฉ"
      }
    ]
  }
}
```

## ๐ ููุงุญุธุงุช

1. **API Keys ุงููุทููุจุฉ**:
   - `OPENWEATHER_API_KEY` ุฃู
   - `GOOGLE_WEATHER_API_KEY` ุฃู
   - `ACCUWEATHER_API_KEY`

2. **ุงูุฃุฏุงุก**:
   - ูุชู ุฌูุจ ุจูุงูุงุช ุงูุทูุณ ุนูุฏ ุชูุนูู ุงูุทุจูุฉ
   - ูุชู cache ุงูุจูุงูุงุช ูุชูููู ุงูุทูุจุงุช
   - ูููู ุชุญุณูู ุงูุฃุฏุงุก ุจุฅุถุงูุฉ debounce ููููุฑุงุช

3. **ุงูุชุญุฏูุซุงุช**:
   - ุงูุจูุงูุงุช ูุชู ุชุญุฏูุซูุง ูู 15 ุฏูููุฉ (ุญุณุจ ุฅุนุฏุงุฏุงุช Weather Service)
   - ูููู ุฅุถุงูุฉ refresh button ูุชุญุฏูุซ ุงูุจูุงูุงุช ูุฏููุงู

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

1. ุฅุถุงูุฉ weather forecast (ุงูุชูุจุคุงุช)
2. ุฅุถุงูุฉ weather alerts layer ูููุตูุฉ
3. ุฅุถุงูุฉ weather history (ุงูุณุฌู ุงูุชุงุฑูุฎู)
4. ุชุญุณูู ุงูุฃุฏุงุก ุจุฅุถุงูุฉ batch requests
5. ุฅุถุงูุฉ weather icons ูุฎุตุตุฉ

