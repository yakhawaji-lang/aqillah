# دليل البيانات الوهمية الكاملة - عَقِلْها

## نظرة عامة

تم إنشاء نظام شامل لإضافة بيانات وهمية واقعية كاملة لمحاكاة النظام بشكل كامل. النظام يضيف بيانات واقعية لجميع أجزاء التطبيق.

## البيانات المضافة

### 1. مقاطع الطرق (Road Segments)
- **الرياض**: 15 طريق رئيسي
- **جدة**: 8 طرق رئيسية
- **الدمام**: 5 طرق رئيسية
- **المجموع**: 28 مقطع طريق

### 2. بيانات الحركة المرورية (Traffic Data)
- **الفترة**: آخر 24 ساعة
- **التحديث**: كل 15 دقيقة
- **العدد**: ~2,688 سجل (96 سجل × 28 مقطع)
- **المحاكاة**:
  - أوقات الذروة (7-9 صباحاً، 5-8 مساءً): ازدحام عالي (60-90)
  - أوقات النهار (10-4): ازدحام متوسط (30-50)
  - أوقات الليل: ازدحام منخفض (20-35)
  - عطلة نهاية الأسبوع: ازدحام أقل

### 3. التنبؤات (Predictions)
- **الفترات**: 5، 10، 30، 60 دقيقة
- **العدد**: ~112 تنبؤ (4 تنبؤات × 28 مقطع)
- **مستوى الثقة**: يقل مع زيادة الفترة
- **العوامل**: الوقت، اليوم، الطقس، الفعاليات

### 4. التنبيهات (Alerts)
- **الأنواع**: ازدحام، حادث، فعالية، طقس
- **المستويات**: low, medium, high, critical
- **المدة**: 2-6 ساعات
- **الاحتمال**: 30% لكل نوع لكل مقطع

### 5. نقاط الازدحام (Bottlenecks)
- **الاحتمال**: 20% لكل مقطع
- **المستويات**: low, medium, high, critical
- **الحالة**: 30% محلولة

### 6. بيانات الطقس (Weather Data)
- **المدن**: الرياض، جدة، الدمام
- **الحالات**: صافي، غائم جزئياً، غائم، مطر، ضباب
- **التوقعات**: ساعية (24 ساعة)

### 7. المسارات (Routes)
- **العدد**: 50-100 مسار
- **الحالات**: planned, active, completed, cancelled
- **الربط**: 60% مرتبطة بمستخدمين
- **البيانات**: مسافة، وقت، طقس، درجات مخاطر

### 8. القرارات المرورية (Traffic Decisions)
- **العدد**: 20-40 قرار
- **الأنواع**: diversion, signal_adjustment, intervention
- **الحالات**: pending, approved, implemented, rejected

### 9. توصيات الإشارات (Signal Recommendations)
- **العدد**: 30% من المقاطع التي لديها إشارات
- **التنفيذ**: 40% تم تنفيذها

### 10. مسارات الطوارئ (Emergency Routes)
- **العدد**: 5-15 مسار نشط
- **التحديث**: كل 30 ثانية
- **البيانات**: ازدحام على طول المسار

### 11. مؤشرات الأداء (KPIs)
- **العدد**: 30 مؤشر
- **الأنواع**: daily, weekly, monthly
- **المؤشرات**: دقة التنبؤ، وقت الاستجابة، فعالية القرارات، الامتثال للخصوصية، وقت التشغيل

### 12. المستخدمون (Users)
- **العدد**: 50-100 مستخدم
- **البيانات**: أسماء عربية، أرقام هواتف سعودية، إعدادات، تفضيلات
- **التتبع**: 60% مفعل تتبع الموقع

### 13. المركبات (Vehicles)
- **العدد**: 70% من المستخدمين لديهم مركبات (1-2 مركبة)
- **البيانات**: شركة، موديل، سنة، نوع، موقع حالي، سرعة

### 14. الإشعارات (User Notifications)
- **العدد**: 5-20 إشعار لكل مستخدم
- **الأنواع**: push, sms, email, in_app
- **الفئات**: alert, warning, info, critical
- **الحالة**: sent, delivered, read

### 15. سجلات الخصوصية (Privacy Audits)
- **العدد**: 100-200 سجل
- **الأنواع**: data_received, anonymization_applied, access_granted, data_deleted
- **المصادر**: telecom_provider, system, user, api

### 16. سجلات الأحداث (Audit Logs)
- **العدد**: 200-400 سجل
- **الأنواع**: route_calculated, alert_created, prediction_made, user_login, data_accessed
- **الإجراءات**: create, read, update, delete

### 17. قواعد التنبيه (Alert Rules)
- **العدد**: 3 قواعد
- **الأنواع**: ازدحام شديد، حادث مروري، طقس صعب
- **الحالة**: 80% مفعلة، 90% نشطة

### 18. إحصائيات الاستخدام (Usage Stats)
- **الفترة**: آخر 7 أيام
- **البيانات**: عدد المستخدمين، التنبيهات النشطة، المسارات المقترحة، متوسط وقت الاستجابة

## كيفية الاستخدام

### الطريقة 1: استخدام السكريبت مباشرة

```bash
npm run db:seed
```

### الطريقة 2: استخدام API Endpoint

```bash
POST /api/seed/realistic
```

## ملخص البيانات المتوقعة

بعد تشغيل السكريبت، ستحصل على:

- ✅ **28** مقطع طريق
- ✅ **~2,688** سجل حركة مرورية
- ✅ **~112** تنبؤ
- ✅ **~30-40** تنبيه
- ✅ **~5-6** نقطة ازدحام
- ✅ **3** بيانات طقس
- ✅ **50-100** مسار
- ✅ **20-40** قرار مروري
- ✅ **~10** توصية إشارة
- ✅ **5-15** مسار طوارئ
- ✅ **30** مؤشر أداء
- ✅ **50-100** مستخدم
- ✅ **~50-100** مركبة
- ✅ **~500-2000** إشعار
- ✅ **100-200** سجل خصوصية
- ✅ **200-400** سجل أحداث
- ✅ **3** قاعدة تنبيه
- ✅ **7** إحصائيات استخدام

**المجموع الكلي**: ~4,000-5,000 سجل بيانات واقعية

## المميزات

1. **واقعية كاملة**: البيانات تحاكي النظام الحقيقي بشكل كامل
2. **تغييرات زمنية**: البيانات تتغير حسب الوقت واليوم
3. **علاقات واقعية**: البيانات مرتبطة ببعضها بشكل منطقي
4. **تنوع**: بيانات متنوعة تغطي جميع السيناريوهات
5. **جاهزية**: النظام جاهز للاستخدام مباشرة

## تحديث البيانات الحية

للمحاكاة المستمرة:

```bash
tsx scripts/update-live-data.ts
```

أو عبر API:
```bash
POST /api/live-data/update
```

## ملاحظات مهمة

1. **حذف البيانات**: السكريبت يحذف جميع البيانات القديمة قبل إضافة الجديدة
2. **الأداء**: قد يستغرق السكريبت 2-5 دقائق لإضافة جميع البيانات
3. **قاعدة البيانات**: تأكد من أن قاعدة البيانات متصلة ومهيأة
4. **الذاكرة**: قد يحتاج السكريبت إلى ذاكرة كافية للبيانات الكبيرة

## استكشاف الأخطاء

### خطأ: "Database connection failed"
- تأكد من تشغيل MySQL
- تحقق من `DATABASE_URL` في ملف `.env`

### خطأ: "Prisma Client not generated"
- قم بتشغيل: `npm run db:generate`

### خطأ: "Tables don't exist"
- قم بتشغيل: `npm run db:push`

## الملفات

- `scripts/generate-realistic-data.ts` - السكريبت الرئيسي
- `scripts/update-live-data.ts` - سكريبت التحديث المستمر
- `app/api/seed/realistic/route.ts` - API endpoint للإضافة
- `app/api/live-data/update/route.ts` - API endpoint للتحديث

